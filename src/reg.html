<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="./js/libs/jquery.js"></script>
    <script src="./js/sliderVerify.js"></script>
    <script src="./js/layer-v3.5.1/layer/layer.js"></script>
    <script src="./js/openreg.js"></script>
    <link rel="stylesheet" href="./css/reset.css">
    <link rel="stylesheet" href="./css/reg.css">
    <link rel="stylesheet" href="./css/sliderVerify.css">
   
</head>
<body>
    <!-- head start -->
    <div class="w990">
        <div id="gome-head" class="wbox">
            <div id="logo">
                <a href="./index.html"></a>
            </div>
        </div>
        <div class="login-box">
            <p class="login-title">
                我已经注册，现在就<a href="./login.html">登录</a>
            </p>
        </div>
    </div>
    <!-- head end -->
    <!-- main start -->
    <div class="regmain-wrap">
        <div class="step-progress" id="container">
            <!-- 步骤进行到哪一步的提示  -->
            <div class="step-slider">
                <!-- 两条灰线 -->
                <ul>
                    <li class="step-li1"></li>
                    <li class="step-li2"></li>
                </ul>
                <!-- 第一步 -->
                <div id="step1" class="step1 step-active">
                    <div class="step-icon-pos step-icon step-icon1">1</div>
                    <div class="step-info step-info1">
                        <div name="js_step_name_1">验证手机号</div>
                    </div>
                </div>
                <!-- 第二步 -->
                <div id="step2"  class="step2">
                    <div class="step-icon-pos step-icon step-icon2">2</div>
                    <div class="step-info step-info2">
                        <div name="js_step_name_2">填写账户信息</div>
                    </div>
                </div>
                <!-- 第三步 -->
                <div  id="step3"  class="step3">
                    <div class="step-icon-pos step-icon step-icon3">2</div>
                    <div class="step-info step-info3">
                        <div name="js_step_name_3">注册成功</div>
                    </div>
                </div>

            </div>
            <!-- 注册操作部分 -->
            <div class="step-content">
                <form action="" autocomplete="off" id="verifyMobileForm">
                    <!-- 手机号 -->
                    <div class="form-group">
                        <input type="text" id="mobile" name="mobile" class="form-control" 
                        placeholder="请输入常用手机号" autocomplete="off">
                        <i class="close mobile-close reg-icon"></i>
                        <i class="inputSuc"></i>
                        <div class="input-call-info pos-abs"></div>
                        <div class="C_err_tips"></div>
                    </div>
                    <!-- 用户名 -->
                    <div class="form-group">
                        <input type="text" id="username" name="username" maxlength="20" 
                        class="form-control" placeholder="请输入用户名" autocomplete="on">
                        <i class="reg-icon close"></i>
                        <i class="inputSuc"></i>
                        <div class="input-call-info pos-abs"></div>
                        <div class="C_err_tips"></div>
                    </div>
                    <!-- 密码 -->
                    <div class="form-group">
                        <input type="password" id="password" name="password"
                         class="form-control" placeholder="请设置登录密码" autocomplete="off">
                         <i class="reg-icon close pwd-close"></i>
                        <i class="reg-icon errOpen" id="eye"></i>
                        <i class="inputSuc"></i>
                        <div class="input-call-info pos-abs"></div>
                        <div class="C_err_tips"></div>
                    </div>
                    <!-- 点击按钮进行验证 -->
                    <div class="form-group" id="js-dingxiang">
                        <div class="dingxiang-box" style=" display: none;">
                            <div class="dingxiang-title">为了账号安全，完成拼图验证</div>
                            <i class="close dingxiang-close"></i>
                        </div>
                        <!-- 滑块验证 start -->
                        <div id="slideBar"></div>
                        <!-- 滑块验证 end -->
                        <a class="button btn-gray wbtn1" href="javascript:;">点击按钮进行验证</a>
                    </div>
                    <!-- 短信验证 -->
                    <div class="form-group clearfix err" id="js-verifyCodeBox"> 
                        <input type="text" name="verifyCode" id="verifyCode" maxlength="6" class="form-control col-1" 
                        placeholder="输入验证码" autocomplete="off" verify="false"> 

                        <a href="javascript:;" class="button btn-gray col-2" 
                        id="getVerifyCode"  
                        >获取短信验证码</a> 

                        <a href="javascript:;" class="button btn-gray col-2 remain-btn" disabled="" 
                        style="display:inline-block"><span id="remainSeconds"></span>秒后重新获取</a>

                         <div class="success-mobile-msg input-call-info top50" style="display: none;">
                    </div> 
                    <div class="C_err_tips top50" id="TipverifyCode">请输入短信验证码</div> 
                    </div>
                    <!-- 确定按钮 -->
                    <div class="form-group-submit">
                        <a href="javascript:void(0)" 
                        class="button btn-primary wbtn1" 
                        id="submitVerifyMobileForm">下一步</a>
                    </div>
                    <!-- 企业用户 -->
                    <div class="js-change-company step-link">
                        <i class="company"></i>
                        <a href="javascript:void(0)">企业用户注册</a>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <!-- main end -->

    <!-- footer start -->
    <div id="gome-foot">
        <div id="gome-foot-box" style="width: 990px;margin: 0 auto;">
            <ul style="height: 22px;">
                <li>
                    <a href="">国美控股集团</a>
                </li>
                <li>
                    <a href="">国美控股集团</a>
                </li>
                <li>
                    <a href="">国美控股集团</a>
                </li>
                <li>
                    <a href="">国美控股集团</a>
                </li>
                <li>
                    <a href="">国美控股集团</a>
                </li>
                <li>|</li>
                <li>
                    <a href="">品牌大全</a>
                </li>
                <li>
                    <a href="">品牌大全</a>
                </li>
                <li>
                    <a href="">品牌大全</a>
                </li>
                <li>
                    <a href="">品牌大全</a>
                </li>
                <li>
                    <a href="">品牌大全</a>
                </li>
                <li>
                    <a href="">品牌大全</a>
                </li>
                <li>|</li>
                <li>
                    <a href="">商家入住</a>
                </li>
                <li>
                    <a href="">国美分销</a>
                </li>
            </ul>
            <p>
                本公司游戏产品适合18岁以上成年人使用  违法和不良信息举报电话：021-39900132  
                <a href="" class="interDrug">互联网药品信息服务资格证编号（沪）-经营性-2019-0006</a>
            </p>
            <p>
                网络食品销售第三方平台提供者备案：沪网食备A0015号  
                <a href="" class="interDrug">
                    网络文化经营许可证沪网文[2021] 0385-031 号
                </a>
                &nbsp;&nbsp;
                <a href="" class="interDrug">
                    增值电信业务经营许可证
                </a>
            </p>
            <p>
                客服电话:4008113333  
                <a href="" class="interDrug">
                    沪ICP备11009419号/京ICP备 19011786号
                </a>
                <a href="" class="interDrug">
                    京B2-20191290
                </a>
                <a href="" class="interDrug">
                    经营执照
                </a>
                <a href="" class="interDrug">
                    营业执照
                </a>
                <a href="" class="interDrug">
                    出版物经营许可证
                </a>
            </p>
            <p>
                ©2000-2021  国美在线电子商务有限公司版权所有  
                <a href="" class="interDrug tw-w-ico-wrap">
                    <i class="tw-w-mark-icon"></i>
                    京公网安备 11010502038379号
                </a>
            </p>
            <div class="gome-foot-credit">
                <a href="" class="credit-baxx">
                    <i></i>
                    <b>经营性网站备案信息</b>
                </a>
                <a href="" class="credit-cxwz">
                    <i></i>
                    <b>诚信网站</b>
                </a>
                <a href="" class="credit-hdjc">
                    <i></i>
                    <b>朝阳网络警察</b>
                </a>
                <a href="" class="credit-wgdj">
                    <i></i>
                    <b>网购大家评</b>
                </a>
                <a href="" class="credit-report">
                    <i></i>
                    <b>上海市互联网违法和不良信息举报中心</b>
                </a>
                <a href="" class="credit-hazar">
                    <i></i>
                    <b>网上有害信息举报专区</b>
                </a>
            </div>
        </div>
    </div>
    <!-- footer end -->
   
</body>
</html>

<!-- 页面结构加载完成立即弹出窗口 -->
<script>
    $(function(){
        // 用户名和密码框默认隐藏,短信验证码框默认隐藏
        $("#verifyMobileForm").children(".form-group").slice(1,3).css("display","none");
        $("#verifyMobileForm").children(".form-group").eq(4).css("display","none");
        $("#TipverifyCode").css("display","none")
        // 获取短信验证码的倒计时消失,点击获取开始计时,
        $(".remain-btn").css("display","none")
        // 弹出层
        const LayIndex=layer.open({
            type:1,
            area:['900px','530px'],
            title:false,
            shade:.1,
            content:`
            <div class="popBoxWrapper dn">
    <div class="uc_box">
        <h5>阅读注册协议</h5>
        <p><b>【审慎阅读】 注册协议已更新，您在点击同意前，应当认真阅读以下协议，尤其粗体标识的重要条款。请您务必审慎阅读、充分理解协议中相关条款内容。</b></p>
        <p><b>【特别提示】</b>当您点击同意后，即表示您已充分阅读、理解并接受协议的全部内容。如您因平台服务与真快乐发生争议的，适用《真快乐平台服务协议》处理。</p>
        <div class="protocol">
            <a href="javascript:void(0)" target="_blank">真快乐平台服务协议</a>
            <div>
                <p>&nbsp;&nbsp;欢迎您成为真快乐平台会员，当您注册成功后，您可凭真快乐平台会员账号登录国美集团旗下的多个交易平台，且无需另行注册账号！</p>
                <p><b>【审慎阅读】</b>您在申请注册流程中点击同意本协议之前，应当认真阅读本协议。<b>请您务必审慎阅读、充分理解各条款内容，特别是免除或者限制责任的条款、法律适用和争议解决条款。免除或者限制责任的条款将以粗体标识，您应重点阅读。</b>当您按照注册页面提示填写信息、阅读并同意本协议且完成全部注册程序后，即表示您已充分阅读、理解并接受本协议的全部内容，并与真快乐平台达成一致，成为真快乐平台“会员”。<b>阅读本协议的过程中，如果您不同意本协议或其中任何条款约定，您应立即停止注册程序。</b></p>
                <p class="btline">第一条真快乐平台运营方</p>
                <p class="btline">本协议由您（“会员”）与国美集团旗下各交易平台（“真快乐平台”或“平台”）的运营方分别订立。各平台运营方分别就您在该平台接受会员服务的过程中享受的权利和承担的义务，与您签订本协议，并独立向您承担责任，互不承担保证、连带或共同责任等。 参与订立本协议的真快乐平台及平台运营方分别为：</p>
                <p class="btline">1.1 国美零售，包括线上网站（gome.com.cn）及客户端和线下实体门店，其中线上网站的运营方为国美在线电子商务有限公司、北京国美在线电子商务有限公司、上海国美在线电子商务有限公司、美信网络技术有限公司等，线下门店的运营方为国美电器有限公司下属各分/子公司、北京市大中家用电器连锁有限公司及下属各分/子公司、上海永乐电器有限公司及下属各分/子公司等。</p>
            </div>
        </div>
        <div class="protocol">
            <a href="javascript:void(0)" target="_blank">真快乐平台隐私政策</a>
            <div>
                <p>&nbsp;&nbsp;欢迎您成为真快乐平台会员，当您注册成功后，您可凭真快乐平台会员账号登录国美集团旗下的多个交易平台，且无需另行注册账号！</p>
                <p><b>【审慎阅读】</b>您在申请注册流程中点击同意本协议之前，应当认真阅读本协议。<b>请您务必审慎阅读、充分理解各条款内容，特别是免除或者限制责任的条款、法律适用和争议解决条款。免除或者限制责任的条款将以粗体标识，您应重点阅读。</b>当您按照注册页面提示填写信息、阅读并同意本协议且完成全部注册程序后，即表示您已充分阅读、理解并接受本协议的全部内容，并与真快乐平台达成一致，成为真快乐平台“会员”。<b>阅读本协议的过程中，如果您不同意本协议或其中任何条款约定，您应立即停止注册程序。</b></p>
                <p class="btline">第一条真快乐平台运营方</p>
                <p class="btline">本协议由您（“会员”）与国美集团旗下各交易平台（“真快乐平台”或“平台”）的运营方分别订立。各平台运营方分别就您在该平台接受会员服务的过程中享受的权利和承担的义务，与您签订本协议，并独立向您承担责任，互不承担保证、连带或共同责任等。 参与订立本协议的真快乐平台及平台运营方分别为：</p>
                <p class="btline">1.1 国美零售，包括线上网站（gome.com.cn）及客户端和线下实体门店，其中线上网站的运营方为国美在线电子商务有限公司、北京国美在线电子商务有限公司、上海国美在线电子商务有限公司、美信网络技术有限公司等，线下门店的运营方为国美电器有限公司下属各分/子公司、北京市大中家用电器连锁有限公司及下属各分/子公司、上海永乐电器有限公司及下属各分/子公司等。</p>
            </div>
        </div>
        <div class="protocol">
            <a href="javascript:void(0)" target="_blank">美付宝服务协议</a>
            <div>
                <p>&nbsp;&nbsp;欢迎您成为真快乐平台会员，当您注册成功后，您可凭真快乐平台会员账号登录国美集团旗下的多个交易平台，且无需另行注册账号！</p>
                <p><b>【审慎阅读】</b>您在申请注册流程中点击同意本协议之前，应当认真阅读本协议。<b>请您务必审慎阅读、充分理解各条款内容，特别是免除或者限制责任的条款、法律适用和争议解决条款。免除或者限制责任的条款将以粗体标识，您应重点阅读。</b>当您按照注册页面提示填写信息、阅读并同意本协议且完成全部注册程序后，即表示您已充分阅读、理解并接受本协议的全部内容，并与真快乐平台达成一致，成为真快乐平台“会员”。<b>阅读本协议的过程中，如果您不同意本协议或其中任何条款约定，您应立即停止注册程序。</b></p>
                <p class="btline">第一条真快乐平台运营方</p>
                <p class="btline">本协议由您（“会员”）与国美集团旗下各交易平台（“真快乐平台”或“平台”）的运营方分别订立。各平台运营方分别就您在该平台接受会员服务的过程中享受的权利和承担的义务，与您签订本协议，并独立向您承担责任，互不承担保证、连带或共同责任等。 参与订立本协议的真快乐平台及平台运营方分别为：</p>
                <p class="btline">1.1 国美零售，包括线上网站（gome.com.cn）及客户端和线下实体门店，其中线上网站的运营方为国美在线电子商务有限公司、北京国美在线电子商务有限公司、上海国美在线电子商务有限公司、美信网络技术有限公司等，线下门店的运营方为国美电器有限公司下属各分/子公司、北京市大中家用电器连锁有限公司及下属各分/子公司、上海永乐电器有限公司及下属各分/子公司等。</p>
            </div>
        </div>
        <div class="popBoxBtn clearfix">
            <a class="inpNoBtn" href="./index.html">不同意</a>
            <a class="inpBtn" id="inpBtn" href="javascript:void(0)">同意协议</a>
        </div>
    </div>
</div>
            `
        })
        $("#inpBtn").click(function(){
            layer.close(LayIndex)
        })
    })
     // 滑块默认消失
     $("#slideBar").css("display","none");
    //  手机号正则
    const regPhone=/^1[3-9][0-9]{9}$/;
    // 用户名正则
    const regUserName=/^.{4,20}\S$/;
    // 密码正则
    const regPwd=/^.{6,20}\S$/;
    // 设置标志位，默认为假
    let showFlag=false;
      // 暂时存取手机号
      let pausePhone=0;
    // 输入框事件
    // 聚焦事件

    $("#mobile").on("focus",function(){
        $(".input-call-info").text("验证完成后,你可以使用该手机登录或找回密码");
        $(".C_err_tips").text("");
        $("#mobile").removeClass("err");
    })


    // 输入框失去焦点函数
    class blurInput{
        constructor({el,reg,tips,please}){
            this.$el=$(el);
            this.tips=tips;
            this.reg=reg;
            this.$please=please;
            this.$close=this.$el.siblings(".close").eq(0);
            this.blurHandler();
            this.focusHandler();
            this.closeHandler();            
        }
        // 失去焦点事件
        blurHandler(please){
           this.$el.on("blur",()=>{
            this.$el.parent().children(".input-call-info").text("");
                if(this.$el.val().trim().length==0){
                    this.$el.parent().find(".C_err_tips").text(this.$please);
                    this.$el.parent().find(".mobile-close").css("display","none");
                    this.$el.addClass("err");
                
            
                }
            })
        }
        // 获得焦点事件
        focusHandler(tips){
            this.$el.on("focus",()=>{
                this.$el.parent().find(".input-call-info")
                .text(this.tips);
                this.$el.parent().find(".C_err_tips").text("");
                this.$el.removeClass("err");
            })
        }
        // 关闭点击事件清空内容
        closeHandler(){
            this.$close.on("click",()=>{
                this.$el.val("");
                this.$close.css("display","none");
            })
        }
    }
    new blurInput({
        el:"#username",
        reg:regUserName,
        tips:"4-20个字符，建议由汉字、字母，数字与"-"、“_”组成",
        please:"请输入用户名"
    })
    new blurInput({
        el:"#password",
        reg:regPwd,
        tips:"6-20个字符，建议使用字母、数字和符号两种以上的组合,区分大小写",
        please:"请输入密码"
    })
    // 输入框失去焦点 start
    $("#mobile").on("blur",function(){
        $(".input-call-info").text("");
        if(  $("#mobile").val().trim().length==0){
          $(".C_err_tips").text("请输入手机号!");
           $(".mobile-close").css("display","none");
           $("#mobile").addClass("err");
      }
    });
     // 输入框失去焦点 end
    $("#mobile").on("input",function(){
        if(regPhone.test($("#mobile").val().trim())){
            $(".inputSuc").css("display","block");
            $("#mobile").parent().find(".C_err_tips").css("display","none");
            $("#mobile").removeClass("err");
            pausePhone=$("#mobile").val().trim();
            showFlag=true;
        }
        if($("#mobile").val().trim().length>=1){
            $(".mobile-close").css("display","block");
        }
    })

    let uNameFlag=false;
    $("#username").on("input",function(){
        if(regUserName.test( $("#username").val().trim())){
            $("#username").parent().find(".inputSuc").css("display","block");
            $("#username").parent().find(".C_err_tips").css("display","none");
            $("#username").removeClass("err");
            // pauseUserName=$("#username").val().trim();
            UserNameFlag=true;
        }
        if($("#username").val().trim().length>=1){
            $("#username").parent().find(".mobile-close").css("display","block");
        }
    })

    let uPwdFlag=false
    $("#password").on("input",function(){
        if(regPwd.test($("#password").val().trim())){
            $("#password").parent().find(".inputSuc").css("display","block");
            $("#password").parent().find(".C_err_tips").css("display","none");
            $("#password").removeClass("err");
            // pausePhone=$("#mobile").val().trim();
            uPwdFlag=true;
        }
        if( $("#password").val().trim().length>=1){
            $("#password").parent().find(".mobile-close").css("display","block");
        }
    })
    // 关闭点击事件,清空输入内容
    $(".mobile-close").on("click",function(){
        $("#mobile").val("");
        $(".mobile-close").css("display","none");
    })
    // 按钮点击事件
    $(".btn-gray").on("click",function(){
      if(  $("#mobile").val().trim().length==0){
          $(".C_err_tips").text("请输入手机号!");
           $(".mobile-close").css("display","none");
           $("#mobile").addClass("err");
      }
      else if(regPhone.test($("#mobile").val().trim())){
        $(".C_err_tips").text("");
      }else{
        $(".C_err_tips").text("手机号格式有误!请重新输入");

      }
      if(showFlag==true){
        $("#slideBar").css("display","block");
      }
      
    })
      // 设置倒计时函数
      var countdown=60; 
    function settime(val) {
            if (countdown == 0) {
                val.removeAttr("disabled");
                val.value = "免费获取验证码";
                countdown = 60;
            } else {
                val.attr("disabled", true);
                val.text("重新发送(" + countdown + ")")
                countdown--;
            }
            setTimeout(function () {
                settime(val)
            }, 1000)
        }
    // 获取短信验证码点击事件
    $("#getVerifyCode").on("click",function(){
        $("#getVerifyCode").css("display","none");
        $(".remain-btn").css("display","inline-block");
        settime( $(".remain-btn"))
    })
    // 设置是否成功的标志位
    let susFlag=false;
     // 滑块验证
     var dataList = ["0","1"];
        var options = {
            dataList: dataList,
            success:function(){  
                console.log("show");
                susFlag=true;
                $("#slideBar").css("display","none");
                layer.msg('验证成功');
                $("#verifyMobileForm").children(".form-group").eq(3).css("display","none");
                $("#verifyMobileForm").children(".form-group").eq(4).css("display","block");
            },
            fail: function(){
                console.log("fail");  
            }
        };
        SliderBar("slideBar", options);
    // 点击下一步发送请求，判断手机号是否存在
    $(".btn-primary").on("click",function(){
        if(!(susFlag&&$("#verifyCode").val().trim()=="123456")){
            return false;
        }
        $(".step1").text("")
        $(".step1").css({
            backgroundImage:"url('./images/reg/newRegister.png')",
            backgroundPosition:"0px 0px"
        })
        $(".step2").addClass("step-active")
       
        console.log("填写成功");
        // 手机号码框消 失,短信验证框消失
        $("#verifyMobileForm").children(".form-group").eq(4).css("display","none");
        $("#verifyMobileForm").children(".form-group").eq(0).css("display","none");
        // 用户名框和密码框显示
        $("#verifyMobileForm").children(".form-group").slice(1,3).css("display","block");
    })

</script>
